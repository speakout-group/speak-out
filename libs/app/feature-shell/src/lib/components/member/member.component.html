<mat-card class="sign-up-card" *ngIf="!username; else subscribedTmpl">
  <mat-card-title-group>
    <mat-card-title>Inscrição</mat-card-title>
    <mat-card-subtitle>DevParaná Conf 2021</mat-card-subtitle>
  </mat-card-title-group>
  <mat-card-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <mat-label>Usuário</mat-label>
        <input
          autofocus
          type="text"
          formControlName="username"
          placeholder="Digite seu usuário"
          matInput
        />
        <mat-error>{{
          form.username?.hasError('pattern')
            ? 'Apenas caracteres alfanuméricos'
            : 'Usuário obrigatório'
        }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Senha</mat-label>
        <input
          type="password"
          formControlName="password"
          placeholder="Digite sua senha"
          matInput
        />
        <mat-error>{{
          form.password?.hasError('minlength')
            ? 'Digite uma senha maior'
            : 'Sua senha ainda é necessária'
        }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Email</mat-label>
        <input
          type="email"
          formControlName="email"
          placeholder="Digite seu email"
          matInput
        />
        <mat-error>{{
          form.email?.hasError('email')
            ? 'Endereço de email inválido'
            : 'Por segurança, seu e-mail é necessário'
        }}</mat-error>
      </mat-form-field>

      <mat-progress-bar
        *ngIf="facade.loader$ | async"
        mode="indeterminate"
      ></mat-progress-bar>

      <mat-error>
        {{ facade.error$ | async }}
      </mat-error>

      <mat-card-actions align="end">
        <!-- <button
          type="button"
          mat-stroked-button
          (click)="onGoogle()"
        >
          <mat-icon svgIcon="google"></mat-icon>
          <span>Google</span>
        </button> -->
        <span class="spacer"></span>
        <button mat-button mat-stroked-button>
          Enviar inscrição
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>

<ng-template #subscribedTmpl>
  <mat-card class="sign-up-card">
    <mat-card-title-group>
      <mat-card-title>Inscrição</mat-card-title>
      <mat-card-subtitle>DevParaná Conf 2021</mat-card-subtitle>
      <img mat-card-sm-image class="speak-out-logo" src="assets/logo.svg" />
    </mat-card-title-group>
    <mat-card-content>
      <h1 class="mat-display-1">{{ username }},</h1>
      <h2 class="mat-display-2">ingresso garantido!</h2>
      <button type="button" mat-stroked-button (click)="username = null">
        Fazer outra inscrição
      </button>
    </mat-card-content>
    <mat-card-footer> </mat-card-footer>
  </mat-card>
</ng-template>
