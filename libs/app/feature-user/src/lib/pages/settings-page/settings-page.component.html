<mat-toolbar color="primary">
  <h2>Configurações</h2>
</mat-toolbar>

<section class="container">
  <mat-card>
    <header>
      <p mat-card-subtitle>Altere informações da sua conta se necessário</p>
    </header>

    <mat-progress-bar
      mode="indeterminate"
      [uiVisibility]="facade.loading$ | async"
    ></mat-progress-bar>

    <mat-accordion>
      <mat-expansion-panel expanded>
        <mat-expansion-panel-header>
          <mat-panel-title> Conta </mat-panel-title>
        </mat-expansion-panel-header>

        <form [formGroup]="settingsForm" (ngSubmit)="updateUsername()">
          <mat-form-field class="full-width mb-1">
            <mat-label>Usuário</mat-label>
            <input
              type="text"
              formControlName="username"
              placeholder="Digite seu usuário"
              matInput
            />
          </mat-form-field>

          <mat-card-actions align="end">
            <button mat-button mat-flat-button color="primary">
              Alterar nome de usuário
            </button>
          </mat-card-actions>
        </form>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Contato </mat-panel-title>
        </mat-expansion-panel-header>

        <form [formGroup]="settingsForm" (ngSubmit)="updateEmail()">
          <mat-form-field class="full-width mb-1">
            <mat-label>Email</mat-label>
            <input
              type="email"
              formControlName="email"
              placeholder="Digite seu email"
              matInput
            />
          </mat-form-field>

          <mat-card-actions align="end">
            <button mat-button mat-raised-button color="primary">
              Alterar email
            </button>
          </mat-card-actions>
        </form>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Segurança </mat-panel-title>
          <!-- <mat-panel-description> Currently I am </mat-panel-description> -->
        </mat-expansion-panel-header>
        <form [formGroup]="settingsForm" (ngSubmit)="updatePassword()">
          <mat-form-field *ngIf="!(facade.user$ | async)?.isSocial">
            <mat-label>Senha atual</mat-label>
            <input
              type="password"
              formControlName="currentPassword"
              placeholder="Digite sua senha atual"
              matInput
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Nova senha</mat-label>
            <input
              type="password"
              formControlName="password"
              placeholder="Digite sua nova senha"
              matInput
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>Confirmar senha</mat-label>
            <input
              type="password"
              formControlName="confirmPassword"
              placeholder="Confirmar sua nova senha"
              matInput
            />
          </mat-form-field>

          <mat-card-actions align="end">
            <a routerLink="/" mat-button mat-raised-button>Voltar</a>
            <button mat-button mat-raised-button color="primary">
              Alterar senha
            </button>
          </mat-card-actions>
        </form>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card>
</section>
